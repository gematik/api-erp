= Test driver interface v1.2.1  image:gematik_logo.png[width=150, float="right"]
include::./config-source.adoc[]

Zielgruppe: image:{FdV}[]

Hier dokumentiert die gematik die Nutzung der Test-FdV-Schnittstelle zum automatisierten Testen von eRezept-FdV-Modul Implementierungen.

toc::[]

Die OpenAPI-Spezifikation für diese Beschreibung ist unter folgendem Link zu finden: link:../resources/openapi/testdriver.yml[OpenAPI-Spezifikation für Test-FdV]

Aktuelle Informationen finden sich hier:
* Übersicht https://github.com/gematik/ref-erp-fdv-testdriver/tree/main/openapi
* Url OpenAPI https://github.com/gematik/ref-erp-fdv-testdriver/blob/main/openapi/v1.2.1/ErpTestDriver.yaml

== Allgemeine Informationen

=== Testdriver-Info abrufen

Mit dieser Operation erhält man allgemeine Informationen über das Testdriver-Interface und die Test-FdV.

include::../resources/openapi-adoc/fdv-testdiver/erp_testdriver_api_v1_info_GET_Request.adoc[]
include::../resources/openapi-adoc/fdv-testdiver/erp_testdriver_api_v1_info_GET_Response.adoc[]

=== Test-FdV starten

Mit dieser Operation kann die Test-FdV gestartet werden.

include::../resources/openapi-adoc/fdv-testdiver/erp_testdriver_api_v1_start_PUT_Request.adoc[]
include::../resources/openapi-adoc/fdv-testdiver/erp_testdriver_api_v1_start_PUT_Response.adoc[]

=== Test-FdV stoppen

Mit dieser Operation kann die Test-FdV gestoppt werden.

include::../resources/openapi-adoc/fdv-testdiver/erp_testdriver_api_v1_stop_PUT_Request.adoc[]
include::../resources/openapi-adoc/fdv-testdiver/erp_testdriver_api_v1_stop_PUT_Response.adoc[]

== Login

=== Login mit KVNR

Mit dieser Operation kann man sich mit einer KVNR am Test-FdV anmelden.

include::../resources/openapi-adoc/fdv-testdiver/erp_testdriver_api_v1_login_PUT_Request.adoc[]
include::../resources/openapi-adoc/fdv-testdiver/erp_testdriver_api_v1_login_PUT_Response.adoc[]

== E-Rezepte

=== Liste aller E-Rezepte abrufen

Mit dieser Operation wird eine Liste (max. 50 Einträge) von E-Rezepten abgerufen, sortiert nach Erstellungsdatum (absteigend).

*UC: E-Rezepte empfangen*  
Siehe https://github.com/gematik/api-erp/blob/master/docs/erp_versicherte.adoc#alle-e-rezepte-ansehen

include::../resources/openapi-adoc/fdv-testdiver/erp_testdriver_api_v1_prescription_GET_Request.adoc[]
include::../resources/openapi-adoc/fdv-testdiver/erp_testdriver_api_v1_prescription_GET_Response.adoc[]

=== Einzelnes E-Rezept abrufen

Mit dieser Operation kann ein einzelnes E-Rezept anhand der ID abgerufen werden.

*UC: E-Rezepte empfangen*  
Siehe https://github.com/gematik/api-erp/blob/master/docs/erp_versicherte.adoc#ein-einzelnes-e-rezept-abrufen-und-in-der-apotheke-einl%C3%B6sen

include::../resources/openapi-adoc/fdv-testdiver/erp_testdriver_api_v1_prescription_id_GET_Request.adoc[]
include::../resources/openapi-adoc/fdv-testdiver/erp_testdriver_api_v1_prescription_id_GET_Response.adoc[]

=== E-Rezept löschen

Mit dieser Operation kann ein E-Rezept am E-Rezept-Fachdienst gelöscht werden.

*UC: E-Rezepte löschen*  
Siehe https://github.com/gematik/api-erp/blob/master/docs/erp_versicherte.adoc#ein-e-rezept-l%C3%B6schen

include::../resources/openapi-adoc/fdv-testdiver/erp_testdriver_api_v1_prescription_id_DELETE_Request.adoc[]
include::../resources/openapi-adoc/fdv-testdiver/erp_testdriver_api_v1_prescription_id_DELETE_Response.adoc[]

== Abgabeinformationen

=== Liste der Abgabeinformationen abrufen

Mit dieser Operation wird eine Liste (max. 50 Einträge) von Abgabeinformationen (medication dispenses) abgerufen, sortiert nach Erstellungsdatum (absteigend).

*UC: Abgabeinformationen anzeigen*  
Siehe https://github.com/gematik/api-erp/blob/master/docs/erp_versicherte.adoc#abgabeinformationen-abrufen

include::../resources/openapi-adoc/fdv-testdiver/erp_testdriver_api_v1_medicationdispense_GET_Request.adoc[]
include::../resources/openapi-adoc/fdv-testdiver/erp_testdriver_api_v1_medicationdispense_GET_Response.adoc[]

== Audit Events

=== Liste der Audit Events abrufen

Mit dieser Operation wird eine Liste (max. 50 Einträge) von Audit Events abgerufen, sortiert nach Erstellungsdatum (absteigend).

*UC: Protokolldaten anzeigen*  
Siehe https://github.com/gematik/api-erp/blob/master/docs/erp_versicherte.adoc#einsicht-in-das-zugriffsprotokoll

include::../resources/openapi-adoc/fdv-testdiver/erp_testdriver_api_v1_auditEvents_GET_Request.adoc[]
include::../resources/openapi-adoc/fdv-testdiver/erp_testdriver_api_v1_auditEvents_GET_Response.adoc[]

== Apotheken

=== Apotheken suchen

Mit dieser Operation kann eine Apotheke anhand verschiedener Parameter gesucht werden.

*UC: Apotheke suchen*  
Siehe https://github.com/gematik/api-erp/blob/master/docs/erp_versicherte.adoc#eine-apotheke-aus-dem-apotheken-verzeichnis-ausw%C3%A4hlen

include::../resources/openapi-adoc/fdv-testdiver/erp_testdriver_api_v1_pharmacy_search_GET_Request.adoc[]
include::../resources/openapi-adoc/fdv-testdiver/erp_testdriver_api_v1_pharmacy_search_GET_Response.adoc[]

=== E-Rezept einer Apotheke zuweisen

Mit dieser Operation kann einem E-Rezept eine Apotheke zugewiesen werden.

include::../resources/openapi-adoc/fdv-testdiver/erp_testdriver_api_v1_pharmacy_assignment_POST_Request.adoc[]
include::../resources/openapi-adoc/fdv-testdiver/erp_testdriver_api_v1_pharmacy_assignment_POST_Response.adoc[]

=== 2D-Code für E-Rezept erzeugen

Mit dieser Operation wird ein E-Rezept-Token als 2D-Code generiert (z.B. für die Einlösung in der Apotheke).

include::../resources/openapi-adoc/fdv-testdiver/erp_testdriver_api_v1_pharmacy_2dCode_POST_Request.adoc[]
include::../resources/openapi-adoc/fdv-testdiver/erp_testdriver_api_v1_pharmacy_2dCode_POST_Response.adoc[]

== Kommunikation

=== Nachrichten abrufen

Mit dieser Operation wird eine Liste (max. 50 Einträge) von Nachrichten (Communications) für einen Patienten abgerufen, sortiert nach Erstellungsdatum (absteigend).

*UC: Nachrichten von Apotheke anzeigen*  
Siehe https://github.com/gematik/api-erp/blob/master/docs/erp_communication.adoc#anwendungsfall-alle-nachrichten-vom-e-rezept-fachdienst-abrufen

include::../resources/openapi-adoc/fdv-testdiver/erp_testdriver_api_v1_communication_GET_Request.adoc[]
include::../resources/openapi-adoc/fdv-testdiver/erp_testdriver_api_v1_communication_GET_Response.adoc[]

=== Nachricht löschen

Mit dieser Operation kann eine Nachricht (Communication) anhand der ID gelöscht werden.

*UC: Nachrichten löschen*  
Siehe https://github.com/gematik/api-erp/blob/master/docs/erp_communication.adoc#anwendungsfall-nachricht-als-apotheke-l%C3%B6schen

include::../resources/openapi-adoc/fdv-testdiver/erp_testdriver_api_v1_communication_id_DELETE_Request.adoc[]
include::../resources/openapi-adoc/fdv-testdiver/erp_testdriver_api_v1_communication_id_DELETE_Response.adoc[]
